# SOEN Toolkit - Conda Environment
#
# Install with custom prefix (SciServer):
#   conda env create -f environment.yml --prefix /home/idies/workspace/Temporary/dpark1/scratch/conda/conda_envs/soen
#
# Activate:
#   conda activate /home/idies/workspace/Temporary/dpark1/scratch/conda/conda_envs/soen
#
# Or standard install:
#   conda env create -f environment.yml
#   conda activate soen

name: soen
channels:
  - pytorch
  - nvidia
  - conda-forge
  - defaults

dependencies:
  # Python
  - python=3.11

  # Core scientific (conda handles CUDA better)
  - pytorch>=2.1
  - pytorch-cuda=12.1  # Remove this line for CPU-only
  - numpy>=1.24

  # JAX (conda-forge)
  - jax>=0.4
  - jaxlib>=0.4

  # Data & visualization
  - matplotlib>=3.7
  - pandas>=2.0
  - seaborn>=0.12
  - scikit-learn>=1.3
  - h5py>=3.10
  - networkx>=2.5

  # Utilities
  - pyyaml
  - tqdm
  - graphviz
  - pytest

  # Pip for remaining packages
  - pip

  # Install soen_toolkit and remaining deps via pip
  - pip:
    - equinox>=0.13.0
    - lightning==2.5.2
    - pytorch-lightning==2.5.2
    - lion-pytorch==0.2.3
    - torchdiffeq>=0.2.5
    - optax>=0.2.4
    - tabulate>=0.9.0
    - natsort>=8.0.0
    - pydot>=1.4.2
    - tensorboard>=2.14
    - tbparse>=0.0.9
    - protobuf>=4,<5
    - -e .  # Install soen_toolkit in editable mode
